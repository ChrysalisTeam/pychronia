<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
{% load i18n helpers %} 
 
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>{% if page_title %}{{ page_title}}{% else %}Welcome to Pangea Network{% endif %}</title>
<link href="{{ MEDIA_URL }}Burned/default_styles.css" rel="stylesheet" type="text/css" />

<script src="{{ MEDIA_URL }}jquery-1.7.1.min.js" type="text/javascript"></script>

<script src="{{ MEDIA_URL }}jquery.mousewheel-3.0.6.pack.js" type="text/javascript"></script>
<script src="{{ MEDIA_URL }}jquery.fancybox.js" type="text/javascript"></script>
<link href="{{ MEDIA_URL }}jquery.fancybox.css" rel="stylesheet" type="text/css" />

<script src="{{ MEDIA_URL }}jquery-ui-1.8.16.custom.js" type="text/javascript"></script>
<script src="{{ MEDIA_URL }}jquery.ba-outside-events.js" type="text/javascript"></script>

<script src="{{ MEDIA_URL }}combobox.js" type="text/javascript"></script>
<script src="{{ MEDIA_URL }}utilities.js" type="text/javascript"></script>

<script src="{{ MEDIA_URL }}videoplayers/quicktimeplayer/AC_QuickTime.js" type="text/javascript"></script>
<script src="{{ MEDIA_URL }}videoplayers/wmvplayer/wmvplayer.js" type="text/javascript"></script>
<!--script src="{{ MEDIA_URL }}videoplayers/wmvplayer/silverlight.js" type="text/javascript"></script-->

<script src="{{ MEDIA_URL }}jquery.dropmenu-1.1.4.js" type="text/javascript"></script>
<link href="{{ MEDIA_URL }}dropmenu.css" rel="stylesheet" type="text/css" />

<script src="{{ MEDIA_URL }}ui.dropdownchecklist-1.4.js" type="text/javascript"></script>
<link href="{{ MEDIA_URL }}ui.dropdownchecklist.css" rel="stylesheet" type="text/css" />
 
<script language="javascript" type="text/javascript">

    $(document).ready(function() {
    	
    	$(".multichecklist").dropdownchecklist({minWidth: "150px", emptyText: "<i>...</i>"}); 
    	
    	
        $('#menulist').dropmenu(
            {
                effect          : "slide",       //  "slide", "fade", or "none"
                speed           : "fast", //  "normal", "fast", "slow", 100, 1000, etc
                timeout         : 50,
                nbsp            : true,
                maxWidth        : 0

            }
        );
        
        
        $('.fancybox').fancybox({
            padding : 5,
            
            openEffect: 'fade', // 'elastic', 'fade' or 'none'
            closeEffect: 'fade', // 'elastic', 'fade' or 'none'
            
	        helpers:  {
		        overlay: {
		            speedIn: 0,
		            speedOut: 300,
		            opacity: 0.6,
		            css: {
		                cursor: 'pointer'
		            },
		            closeClick: true
		        },
		        title: {
		            type: 'inside' // 'float', 'inside', 'outside' or 'over'
		        }
	        }
        
        });
        
        /*
        GOOOD
        $(function() {
            $( "#sortable1, #sortable2" ).sortable({
                connectWith: ".connectedSortable"
            }).disableSelection();
        });
        
        
        $('.radiotrack').draggable( {
        	containment: "#radiotracks",
        	cursor: "move",
        	revert: "invalid",
          } );*/
        
        
        /* ADD GLOBAL AJAX ERROR HANDLERS (all executed on error)
        
        $(document).ajaxError( handler(event, jqXHR, ajaxSettings, thrownError) )
        
        jQuery.ajax({
			...,
			complete: function(event, XHR, ajaxSettings, thrownError) {
			if (XHR.status == 200) { // success
			} elseif (XHR.status == 500) { // Internal Server Error
			} elseif (XHR.status == 404) { // File Not found
			}
			});
        
        */
        
        /*
        $(function() {
            $.ajaxSetup({
                error: function(jqXHR, exception) {
                    if (jqXHR.status === 0) {
                        alert('Not connect.\n Verify Network.');
                    } else if (jqXHR.status == 404) {
                        alert('Requested page not found. [404]');
                    } else if (jqXHR.status == 500) {
                        alert('Internal Server Error [500].');
                    } else if (exception === 'parsererror') {
                        alert('Requested JSON parse failed.');
                    } else if (exception === 'timeout') {
                        alert('Time out error.');
                    } else if (exception === 'abort') {
                        alert('Ajax request aborted.');
                    } else {
                        alert('Uncaught Error.\n' + jqXHR.responseText);
                    }
                }
            });
        });
        
        $("div.log").ajaxError(function(event, jqXHR, ajaxSettings, thrownError) {
        	  $(this).text( "Triggered ajaxError handler." );
        	});
        */
        
        
    });
</script>



{% block headers %}  

{% endblock %}

</head>
<body>

    {% if possible_impersonations %}
    <div style="float:left;">
        <div style="color: #FFF; font-size: 10px;">Write: {{ user.has_write_access }} <br/> Impersonation: {{ user.is_impersonation}}</div>
        {% for impersonation in possible_impersonations %}
        <form action="" method="POST">
            <input type="hidden" name="{{ impersonation_post_variable }}" value="{{ impersonation }}"/>
            <input type="submit" name="" value="{{ impersonation|capfirst }}">
        </form>
        {% endfor %}
        
        {% if user.is_impersonation %}
        <form action="" method="POST">
            <input type="hidden" name="{{ impersonation_post_variable }}" value=""/>
            <input type="submit" name="" value="STOP">
        </form>
        {% endif %}
    </div>
    {% endif %}
    
<div id="outer">
  <div id="header">

    <h2>
	    <a href="{% gameurl rpgweb.views.homepage %}">
		    {% if user.is_authenticated %}
		          {% blocktrans with user.username|capfirst as user_name %}
		              Welcome to your Realm, {{ user_name }} 
		          {% endblocktrans %}
		    {% else %}
		    	{% trans "Welcome, Visitor" %}
		    {% endif %}
	    </a>
    </h2>
    {% if not game_is_started %} <h2>{% trans "Server in maintenance mode - no form submission possible" %}</h2> {% endif %}
  </div>
  <div id="menu">
    <ul id="menulist" class="dropmenu" style="z-index: 100; display: none;">
        {% for menu in menus %} 
        	 {% comment %} here we only handle 2-levels menus, at the moment... {% endcomment %}
        	 
             <li id="submenu" class="toplevel">
             
                 {% if menu.is_active %}
                 	<a href="{{ menu.url }}">{{ menu.title }}</a>
                 {% else %}
                 	{{ menu.title }}
                 {% endif %}
                 
                 {% if menu.submenus %}
	                 <ul>
	                	{% for submenu in menu.submenus %} 
	                  		<li>
	                  		     {% if submenu.is_active %}
				                 	<a href="{{ submenu.url }}" accesskey="{{ forloop.counter }}">{{ submenu.title }}</a>
				                 {% else %}
				                 	{{ submenu.title }}
				                 {% endif %}
				                 
	                  		    {% comment %}<a {% if user.is_master %} style="font-size: 0.6em; line-height: 0.5em;" {% endif %}
	                  		        href="{{ item_url }}" >{{ item_name }}</a>{% endcomment %}
	                  		</li>
	                  	{% endfor %}
	              	 </ul>
	             {% endif %}
	             
          	</li>
          	
        {% endfor %}
    </ul>
  </div>
  <div id="content">
    <div id="xbg1">&nbsp;</div>
    <div id="primaryContentContainer">
      <div id="primaryContent">
      
		{% if page_title %}<h2>{{ page_title }}</h2>{% endif %}

        {% if help_keyword %}    
        <a href="{% gameurl rpgweb.views.view_help_page keyword=help_keyword %}" class="fancybox fancybox.ajax" title="{{ page_title }}">
            <img style="width 50px; height: 50px; float: right;" src="{{ MEDIA_URL }}images/question_mark.png"/>
        </a>
        {% endif %}
    

	    {% if messages %}
	       <ul class="messages">
	           {% for message in messages %}
	           <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message|linebreaksbr }}</li>
	           {% endfor %}
	       </ul>
	    {% endif %}
		
               
        {% block content %}  
      
        
		{% endblock %}
		
		

      </div>
    </div>
   
   
   {% block additional_column %} 

    
	{% endblock %}
   
   
    <div class="clear"></div>
  </div>
  <div id="footer">
  
    
        <b><i>
        {% if online_users %}
            {% blocktrans count online_users|length as counter %}
                Online user:
            {% plural %}
                Online users:
            {% endblocktrans %}
            {{ online_users|join:", " }}
        {% else %}
            {% trans "No users currently online." %} 
        {% endif %}
        </i></b>
        
        <br/>
        
        <b>{% trans "Pangea Cybernetics Network" %}</b> -
        
        <form id="change_language_fr" style="display:inline; vertical-align: middle;" method="POST" action="{% url django.views.i18n.set_language %}">
        <input type="hidden" name="language" value="fr"/>
        <a href="javascript:document.getElementById('change_language_fr').submit()"><img src="{{ MEDIA_URL }}images/France.jpg"/></a>
        </form> 

        <form id="change_language_en" style="display:inline; vertical-align: middle;" method="POST" action="{% url django.views.i18n.set_language %}">
        <input type="hidden" name="language" value="en"/>
        <a href="javascript:document.getElementById('change_language_en').submit()"><img src="{{ MEDIA_URL }}images/UK.jpg"/></a>
        </form>         

  </div>
</div>
</body>
</html>
