
{% comment %} !! Remember that these div ids can be used as url anchors : "/my/url/#1-fa4" ! {% endcomment %}

** NEW **


FEATURES

- messaging templates filtering by taxonomy ?
- Add captcha to some special static pages - WHICH ??

- refactor permission handling, add it to money/item viewing for example...

BUGLETS:
- world scan_form entry is dead : assert NewFormClass, new_action_name # important, not all actions have form classes available DONE BUT NEEDS TEST COVERAGE
- use {{ _("hi")|escapejs }} in JS everywhere instead of trans tag
- remove dumb escape() calls from $.get request arguments
- auto test all forms with also inspect.getsourcelines(object) etc.
- check what happens when calling setlanguage flags from a "POST-access-only" page like private files ??
- tweak access checking of gameviews, so that if impersonation we get no error message, and just get redirected to homepage of impersonated user


** WIP, needs cosmetics **

- interface to edit static pages WIP
- interface to edit radio spots WIP
- interface to edit external contacts WIP
- global page styles and messages for WIP


** DONE **

- interactive world map DONE
- drag&drop radio playlist management DONE
- filling of footer with game info DONE
- global management of ajax errors, with popups DONE
- add protections to ensure that all file requests never leave GAME_FILES_ROOT - ALREADY OK
- ACCESS CONTROL ON HELP PAGES -> ALREADY DONE
- separate tests for try_processing_formless_game_action system DONE
- fix wong ordering of overrides in visible_by dict of _immediately_dispatch_message() DONE
- SSL protection to be added to wiretapping page DONE
- fix admin dashboard: special widgets (like multicheckbox) !! DONE (no more ajax ATM)
- replace page_title by klass.TITLE in main template (or as fallback) - DONE
- admin-form to activate views DONE
- swallow UninstantiableFormError by default in form instantiation
- ability for users to transfer their objects to someone else DONE
- add autolinks for email addresses in rich texts DONE
- add preview of composed message in ajax frame DONE (but ugly css)
- test determine_actual_game_writability() and such DONE
- add auto-generation of ActionHandler help pages (via action middlewares) DONE
- BUG The requested content cannot be loaded. Please try again later. (if markitup empty sent to preview) DONE
- dataset.size not defined on first launch of world map - Bug report filed, disabling jnotify reports is a workaround
- bug report : Application error (please consider reporting that bug) - ReferenceError: False is not defined DONE
- bad assert self.datamanager.is_in_transaction() in res = self.execute_game_action_callback(action_name=action_name, unfiltered_params=data) DONE
- add a way to DESTROY sent messages by game master, in case of trouble DONE
- adding of impersonation controls to site top WIP (needs JS code) DONE
- filling of headers with game info and notifications DONE
- messaging reply/resend + templates DONE
- adding novelty tags ALMOST everywhere (menu, radio and help icons...) DONE
- adding of impersonation target widget for characters (but niot writability) DONE
- review all always_writable views DONE
- refactoring of loggers, at top and DM level DONE
- normalize all setup methods to make game file paths absolute inside GAME_FILES_ROOT DONE
- mobile version of site (-> refactor base_mobile to mimic base_web structure) - NO, ATM SIMPLE SUMMARY PAGE - DONE
- javascript-obfuscated-popuped "report bug" div in mini footer DONE
- add inner site links to restructuredtext via special tag DONE


====================


Later: allow accumulation of visibility reasons, to have both sender and recipient together in msg for same user!!!

Idea of captcha: play with colors illusions!!

ELITE RPG:
eclectic
enchanting -> bewitching, captivating, enthralling, entrancing, fascinating
enrapturing
enlightening/edifying


ADD THIS AFTER SECURING IT:
class WebFactionFixes(object):
    """Sets 'REMOTE_ADDR' based on 'HTTP_X_FORWARDED_FOR', if the latter is
    set.

    Based on http://djangosnippets.org/snippets/1706/
    """
    def process_request(self, request):
        if 'HTTP_X_FORWARDED_FOR' in request.META:
            ip = request.META['HTTP_X_FORWARDED_FOR'].split(",")[0].strip()
            request.META['REMOTE_ADDR'] = ip


ITEMS NEEDING TO BE EDITABLE
- radios spots OK
- globally registered contacts OK
- encyclopedia articles OK
- items, gems & artefacts ? not for v1
- nightmare captcha ? not for v1


@register_view(access=UserAccess.authenticated) # not always available, so beware!! TODO FIXME ensure it's not displayed if not available!
def item_3d_view(request, item, template_name='utilities/item_3d_viewer.html'):

ADD standard 404 and 500 templates, + custom 403 in latest django etc.

Make access error msgs persist until login page, when redirecting !! OK

Add next argument to login page !!!!

ADD unittests for template helpers !!!

BUG html injection dans chat.js ? NOPE it's OK !

- include timezone handling NOT ATM

Add colors specific to each chatter + "system" chatter
Launch pychecker or pylint of each file of rpgweb package

Add special logger, carrying the player name and gamer instance id !

Add critical logging for some cases where no usageerror should be raised !! (eg wiretapping)  #OK DONE

use usageError in all getters of datamanager instead of keyerror

Include webradio widget in div with same color, and make it bigger, to avoid zoom/dezoom problems.

CHECK THAT NO PB WHEN GAME PAUSED, FOR PERIODIC PROCESSING !!!

* Main Site Structure *
- intro
- features
- license
- demo
- create game
- livre d'or


Add periodic retrieval of chatters in chat !! DONE

TODO - check that no periodic task fails while game paused !!


Add security to djinn chat - check authorizations - NO, knowing their NAME is the best protection!

Big problem - how to ensure javascript functions are well called periodically ??? with .ajaxError() reset ??

Add thread-local variable to ensure no transaction is committed twice by transaction watcher !! OSEF

Remove also test constructions in utilities.AIML

TODO - FIX secure door locking in paused game mode !!!

Ajouter <instructions> possibilité échange objets archéologiques et lots entiers de gemmes (gamemamster must be aware of that)!

Print description of partners in instruction page !



Some bots can require archéological objects too ! NOT ATM

Les achariths doivent avoir choix de trahir leur camp en milieu de partie plutôt !

Ajouter interactions entre joueurs, chantages etc.

Ajouter aide déroulante dans chaque section DONE

- ajouter des details cruciaux à TOUTES runes !

- clarifier règles absolues : pas de vol d'argent, pas de triche, emails uniquement valables à l'intérieur du site

- compléter les djinns, valeurs par défaut si pas de réponses surtout !

- ajouter instructions ou systèmes pour éviter abus de mercenaires ?

- automatiquement notifier autres camps s'ils chopent objets archéologiques ???

- LG donne reductions aux gens, qu'ils peuvent perdre s'ils sont démasqués

- refaire carte en découpant mieux pays


Faire page d'introduction
- situation de l'univers
- situation géopolitique
- bestaire des ennemis ?


- internationalize personal documents (all in yaml ??)

- refactor CSS stylesheets ? DONE

- recode in simple html the door unlocker ! DONE

- add better management of ajax errors (read/unread mails, oracle answers...) DONE

- switch to small JALICE bot !

- make wiretapping and agent hiring per-player or per-domain ?? not useful... DONE



