{% extends "messaging/base.html" %}

{% load i18n helpers kwacros %}
{% loadkwacros "metalradiance_kwacros.html" %}



{% block sidebar %}

    {% usekwacro side_panel_start frame_class="mini_frame float_left clear_left" decos="2" %}
    <h2>{% trans "Messages" %}</h2>

    <div class="scroll_yellow_flat full_width center tiny_bullets small_text">
        {% if messages %}
        <ul>
            {% for ctx, message in messages %}
                <li>{% if ctx.has_read == False %}<b>{% endif %}
                        <a href="#{% first_non_empty message.id ctx.template_id %}" >{{ message.subject }}</a>
                    {% if ctx.has_read == False %}</b>{% endif %}
                </li>
            {% endfor %}
        </ul>
        {% else %}
            <p>{% trans "No messages yet." %}</p>
        {% endif %}
    </div>
    {% usekwacro side_panel_end %}

{% endblock %}





{% block content %}

    {{ block.super }}

    {% if not messages %}

        <div style="text-align:center;">
            <i>{% trans "No messages yet." %}</i>

        </div>

    {% else %}

        {% for ctx, message in messages %}
            {% if not forloop.first %}
                <hr/>
            {% endif %}

            {% include "messaging/single_message.html" with ctx=ctx message=message is_first=1 %}
        {% endfor %}

    {% endif %}

{% endblock %}









